{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://pgxn.org/meta/v1/distribution.schema.json",
  "title": "Distribution",
  "description": "The PGXN distribution metadata specification",
  "type": "object",
  "properties": {
    "name": {
      "$ref": "term.schema.json",
      "description": "The name of the distribution. This is usually the same as the name of the “main extension” in the distribution, but may be completely unrelated to the extensions within the distribution. This value will be used in the distribution file name on PGXN.",
      "examples": ["pgTAP", "vector"]
    },
    "version": {
      "$ref": "version.schema.json",
      "description": "The version of the distribution to which the metadata structure refers. Its value must be a [SemVer](https://semver.org)."
    },
    "abstract": {
      "description": "A short description of the purpose of the distribution.",
      "type": "string",
      "minLength": 1,
      "examples": [
        "Unit testing for PostgreSQL",
        "Open-source vector similarity search for Postgres"
      ]
    },
    "maintainer": { "$ref": "maintainer.schema.json" },
    "license": { "$ref": "license.schema.json" },
    "provides": { "$ref": "provides.schema.json" },
    "meta-spec": { "$ref": "meta-spec.schema.json" },
    "description": {
      "description": "A longer, more complete description of the purpose or intended use of the distribution than the one provided by the `abstract` key.",
      "type": "string",
      "minLength": 1,
      "examples": [
        "pgTAP is a suite of database functions that make it easy to write TAP-emitting unit tests in psql scripts or xUnit-style test functions."
      ]
    },
    "generated_by": {
      "description": "This field indicates the tool that was used to create this metadata. There are no defined semantics for this field, but it is traditional to use a string in the form “Software package version 1.23” or the maintainer’s ame, if the file was generated by hand.",
      "type": "string",
      "minLength": 1,
      "examples": ["Module::Build::PGXN version 0.42"]
    },
    "tags": { "$ref": "tags.schema.json" },
    "no_index": { "$ref": "no_index.schema.json" },
    "prereqs": { "$ref": "prereqs.schema.json" },
    "release_status": {
      "description": "This field specifies the release status of this distribution. It **must** have one of the following values:\n\n*   **stable**: Indicates an ordinary, “final” release that should be indexed by PGXN.\n\n*   **testing**: Indicates a “beta” release that is substantially complete, but has an elevated risk of bugs and requires additional testing. The distribution should not be installed over a stable release without an explicit request or other confirmation from a user. This release status may also be used for “release candidate” versions of a distribution.\n\n*   **unstable**: Indicates an “alpha” release that is under active development, but has been released for early feedback or testing and may be missing features or may have serious bugs. The distribution should not be installed over a stable release without an explicit request or other confirmation from a user.",
      "enum": ["stable", "testing", "unstable"]
    },
    "resources": { "$ref": "resources.schema.json" }
  },
  "patternProperties": {
    "^[xX]_": {
      "description": "Custom key"
    }
  },
  "additionalProperties": false,
  "required": [
    "name",
    "version",
    "abstract",
    "maintainer",
    "license",
    "provides",
    "meta-spec"
  ],
  "examples": [
    {
      "name": "pgTAP",
      "abstract": "Unit testing for PostgreSQL",
      "description": "pgTAP is a suite of database functions that make it easy to write TAP-emitting unit tests in psql scripts or xUnit-style test functions.",
      "version": "0.26.0",
      "maintainer": [
        "David E. Wheeler <theory@pgxn.org>",
        "pgTAP List <pgtap-users@googlegroups.com>"
      ],
      "license": {
        "PostgreSQL": "https://www.postgresql.org/about/licence"
      },
      "prereqs": {
        "runtime": {
          "requires": {
            "plpgsql": 0,
            "PostgreSQL": "8.0.0"
          },
          "recommends": {
            "PostgreSQL": "8.4.0"
          }
        }
      },
      "provides": {
        "pgtap": {
          "file": "sql/pgtap.sql",
          "docfile": "doc/pgtap.mmd",
          "version": "0.2.4",
          "abstract": "Unit testing assertions for PostgreSQL"
        },
        "schematap": {
          "file": "sql/schematap.sql",
          "docfile": "doc/schematap.mmd",
          "version": "0.2.4",
          "abstract": "Schema testing assertions for PostgreSQL"
        }
      },
      "resources": {
        "homepage": "https://pgtap.org/",
        "bugtracker": {
          "web": "https://github.com/theory/pgtap/issues"
        },
        "repository": {
          "url": "https://github.com/theory/pgtap.git",
          "web": "https://github.com/theory/pgtap",
          "type": "git"
        }
      },
      "generated_by": "David E. Wheeler",
      "meta-spec": {
        "version": "1.0.0",
        "url": "https://pgxn.org/meta/spec.txt"
      },
      "tags": [
        "testing",
        "unit testing",
        "tap",
        "tddd",
        "test driven database development"
      ]
    }
  ]
}
